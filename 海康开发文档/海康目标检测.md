
海康的产品本身集成了非常多的功能，像普通的移动侦测，遮挡报警还有异常，高级一点的有人脸检测，人流检测，遗落物品检测等等，但是对于特定的目标检测怎么办呢？

方案主要有两种:
1. 拉流到本地进行目标检测
2. 使用海康自家的AI方案

拉流到本地没什么好说的，简单说一下海康自家的ai方案，官网上可以看具体介绍，不过多赘述[海康AI开放平台](https://ai.hikvision.com/)

对于我们本地，可以使用 NET_DVR_SetDVRMessageCallBack_V31（）函数来获取信息，该函数和布防类似
其原型为
```C++
BOOL NET_DVR_SetDVRMessageCallBack_V31(
  MSGCallBack_V31    fMessageCallBack,  
  void               *pUser);  
  
//参数
fMessageCallBack    回调函数   
pUser   用户数据   
//回调函数原型  
typedef BOOL(CALLBACK *MSGCallBack_V31)(  
  LONG               lCommand,  
  NET_DVR_ALARMER    *pAlarmer,  
  char               *pAlarmInfo,  
  DWORD              dwBufLen,  
  void               *pUser  
);  
/*
回调函数参数  
lCommand   
	 上传的消息类型，不同的报警信息对应不同的类型，通过类型区分是什么报警信息，详见“Remarks”中列表   
pAlarmer   
	 报警设备信息，包括设备序列号、IP地址、登录IUserID句柄等   
pAlarmInfo   
	 报警信息，通过lCommand值判断pAlarmer对应的结构体，详见“Remarks”中列表   
dwBufLen   
	 报警信息缓存大小   
pUser   
	 用户数据   
Return Values  
	TRUE表示成功，FALSE表示失败。接口返回失败请调用NET_DVR_GetLastError获取错误码，通过错误码判断出错原因。*/

```


- 报警回调函数有返回值，接收到数据需要返回TRUE。
- 通过该接口设置的报警回调函数是全局唯一的，注册多次会覆盖之前的，只有最后设置的回调函数有效，所有设备报警信息都是在同一个回调函数中返回的，通过报警设备信息（pAlarmInfo）区分是哪台设备。
- 该接口中回调函数的第一个参数（lCommand）和第三个参数（pAlarmInfo）是密切关联的，其关系见下表：![[Pasted image 20251104113010.png]]

该表中只覆盖了部分应用，更多的可查看官方的开发文档[NET_DVR_SetDVRMessageCallBack_V31](https://open.hikvision.com/hardware/definitions/NET_DVR_SetDVRMessageCallBack_V31.html)

